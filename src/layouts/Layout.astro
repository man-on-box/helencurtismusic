---
import { getEntry } from "astro:content";
import Navbar from "./Navbar.astro";

const { data } = await getEntry("site", "general");

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Piano tuition and performance based in Hebden Bridge, UK"
    />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    <title>{title} {data.pageTitleSuffix}</title>
  </head>
  <body class="flex flex-col min-h-screen justify-between">
    <header>
      <Navbar />
    </header>
    <main class="mb-auto">
      <slot />
    </main>
    <footer class="relative mt-12 w-full bg-slate-800">
      <button
        id="scroll-top"
        title="Scroll to top"
        aria-label="Scroll to top"
        class="flex justify-center items-center absolute -top-10 right-10 h-16 w-16 border-4 border-slate-800 bg-white shadow rounded-full hover:scale-105"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"></path>
        </svg>
      </button>

      <div class="mx-auto max-w-7xl px-6 py-8 lg:px-8">
        <p class="text-white text-sm">
          {data.footerText}
        </p>
      </div>
    </footer>
  </body>
</html>

<style>
  body {
    background-color: #ffffff;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.4' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E"),
      linear-gradient(
        45deg,
        hsl(240deg 100% 96%) 0%,
        hsl(294deg 59% 95%) 9%,
        hsl(337deg 100% 97%) 18%,
        hsl(4deg 100% 97%) 27%,
        hsl(22deg 100% 97%) 36%,
        hsl(37deg 79% 98%) 45%,
        hsl(58deg 58% 97%) 55%,
        hsl(77deg 67% 96%) 64%,
        hsl(99deg 76% 95%) 73%,
        hsl(125deg 85% 95%) 82%,
        hsl(146, 54%, 92%) 91%,
        hsl(161, 76%, 94%) 100%
      );
  }
</style>

<script>
  const toTop = document.getElementById("scroll-top");

  toTop?.addEventListener("click", () => {
    window.scrollTo({
      top: 0,
      behavior: "smooth",
    });
  });
</script>
