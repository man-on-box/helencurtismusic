---
import { getEntry } from "astro:content";
import Navbar from "./Navbar.astro";

const { data } = await getEntry("site", "general");

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Piano tuition and performance based in Hebden Bridge, UK"
    />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    <title>{title} {data.pageTitleSuffix}</title>
  </head>
  <body class="flex flex-col min-h-screen justify-between">
    <header>
      <Navbar />
    </header>
    <main class="mb-auto">
      <slot />
    </main>
    <footer class="relative top-0 mt-12 w-full bg-slate-800">
      <button
        id="scroll-top"
        title="Scroll to top"
        aria-label="Scroll to top"
        class="flex justify-center items-center absolute bottom-10 right-10 h-16 w-16 border-4 border-slate-800 bg-white shadow rounded-full hover:scale-105"
      >
        <svg
          class="h-8 w-8"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 115.4 122.88"
          ><path
            d="M24.94 67.88A14.66 14.66 0 0 1 4.38 47L47.83 4.21a14.66 14.66 0 0 1 20.56 0L111 46.15a14.66 14.66 0 0 1-20.54 20.91l-18-17.69-.29 59.17c-.1 19.28-29.42 19-29.33-.25l.3-58.29-18.2 17.88Z"
            style="fill:#000"></path></svg
        >
      </button>

      <div class="mx-auto max-w-7xl px-6 py-8 lg:px-8">
        <p class="text-white text-sm">
          {data.footerText}
        </p>
      </div>
    </footer>
  </body>
</html>

<style>
  body {
    background-color: #f9f9f9;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='70' height='46' viewBox='0 0 70 46'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%2344bf3e' fill-opacity='0.06'%3E%3Cpolygon points='68 44 62 44 62 46 56 46 56 44 52 44 52 46 46 46 46 44 40 44 40 46 38 46 38 44 32 44 32 46 26 46 26 44 22 44 22 46 16 46 16 44 12 44 12 46 6 46 6 44 0 44 0 42 8 42 8 28 6 28 6 0 12 0 12 28 10 28 10 42 18 42 18 28 16 28 16 0 22 0 22 28 20 28 20 42 28 42 28 28 26 28 26 0 32 0 32 28 30 28 30 42 38 42 38 0 40 0 40 42 48 42 48 28 46 28 46 0 52 0 52 28 50 28 50 42 58 42 58 28 56 28 56 0 62 0 62 28 60 28 60 42 68 42 68 0 70 0 70 46 68 46'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  }
</style>

<script>
  const toTop = document.getElementById("scroll-top");

  toTop?.addEventListener("click", () => {
    window.scrollTo({
      top: 0,
      behavior: "smooth",
    });
  });
</script>
